<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.3 on Wed Sep 14 19:26:34 2011 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>hiihat_rainbow_index.pro (HiiHAT)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="hiihat_rainbow_index.pro (HiiHAT)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">;+  </span>
<span class="comments">; Takes an index between 0 and 1 and maps it to a rainbow spectra that</span>
<span class="comments">; returns an appropriate 24 bit integer representation in RGB space.</span>
<span class="comments">; Ensure you have loadct,0 active (grey scale) for sanity.</span>
<span class="comments">;</span>
<span class="comments">; :Author: David Ray Thompson</span>
<span class="comments">;</span>
<span class="comments">; :Categories: util</span>
<span class="comments">;</span>
<span class="comments">; :Params:</span>
<span class="comments">;  index, in, required, type=float</span>
<span class="comments">;   value in [0,1] to map to RGB</span>
<span class="comments">;</span>
<span class="comments">; :Keywords:</span>
<span class="comments">;  black: in, optional, type=boolean</span>
<span class="comments">;   Add black to the below_red region of the matrix</span>
<span class="comments">;  white: in, optional, type=boolean</span>
<span class="comments">;   Add white to the above_purple region of the matrix</span>
<span class="comments">;</span>
<span class="comments">; :Returns:</span>
<span class="comments">;   24 bit integer representation in RGB space.</span>
<span class="comments">; :Copyright:</span>
<span class="comments">;  Copyright 2009, by the California Institute of Technology. ALL RIGHTS</span>
<span class="comments">;  RESERVED. United States Government Sponsorship acknowledged. Any commercial</span>
<span class="comments">;  use must be negotiated with the Office of Technology Transfer at the</span>
<span class="comments">;  California Institute of Technology.</span>
<span class="comments">; </span>
<span class="comments">;  This software may be subject to U.S. export control laws and regulations.  By</span>
<span class="comments">;  accepting this document, the user agrees to comply with all applicable U.S.</span>
<span class="comments">;  export laws and regulations.  User has the responsibility to obtain export</span>
<span class="comments">;  licenses, or other export authority as may be required before exporting such</span>
<span class="comments">;  information to foreign countries or providing access to foreign persons.</span>
<span class="comments">;-</span>
<a id="hiihat_rainbow_index:source"></a>function hiihat_rainbow_index, index, BLACK = black, WHITE = white

    <span class="comments">;This is a Matlab-style color array with RGB between 0 and 1</span>
    <span class="comments">;Will need to adapt this to IDL standards in a moment</span>
    colormap=[ $
               [1.0,0.0,  0],$ <span class="comments">;red</span>
               [1.0,0.5,  0],$ <span class="comments">;orange</span>
               [1.0,1.0,  0],$ <span class="comments">;yellow</span>
               [0.5,1.0,  0],$ <span class="comments">;puce</span>
               [0.0,1.0,  0],$ <span class="comments">;green</span>
               [0.0,0.75,0.75],$ <span class="comments">;cyan</span>
               [0.0,0.0,  1],$ <span class="comments">;blue</span>
               [0.5,0.0,  1],$ <span class="comments">;violet</span>
               [1.0,0.0,  1] $ <span class="comments">;purple</span>
             ]
    
    <span class="comments">;Add white to the above_purple region of the matrix</span>
    if keyword_set(white) then begin
        colormap = [[colormap],[[1.0,1.0,1.0]]]
    end
    
    <span class="comments">;Add black to the below_red region of the matrix</span>
    if keyword_set(black) then begin
        colormap = [[[0.0,0.0,0.0]],[colormap]]
    end

    <span class="comments">;;Now we have to figure out where the</span>
    <span class="comments">;;index specifies we are in terms of</span>
    <span class="comments">;;this new colormap object</span>

    <span class="comments">;How many colors do we have anyway?</span>
    temp = size(colormap)
    n_colors = temp[2]

    <span class="comments">;Generates index's position relative to the number of colors present</span>
    expanded_index=(n_colors-1)*index

    leftcolor  = min  ([n_colors-1, floor(expanded_index)])
    rightcolor = min  ([n_colors-1, leftcolor+1.0        ])

    rightweight=expanded_index  - leftcolor
    leftweight =1.0             - rightweight

<span class="comments">;    print,expanded_index,rightweight,leftweight,leftcolor,rightcolor</span>

    <span class="comments">;calculate the resulting rgb using 0-1 notation</span>
    r=colormap[0,leftcolor]*leftweight+colormap[0,rightcolor]*rightweight
    g=colormap[1,leftcolor]*leftweight+colormap[1,rightcolor]*rightweight
    b=colormap[2,leftcolor]*leftweight+colormap[2,rightcolor]*rightweight

    <span class="comments">;map the rgb to 0-255 notation</span>
    r=long(r*255.0)
    g=long(g*255.0)
    b=long(b*255.0)

<span class="comments">;    print, index, expanded_index, n_colors-1, 'rgb', r, g, b, floor(r+g*256L+b*65536L)make</span>


    <span class="comments">;Return the 24 bit integer version</span>
    return,floor(r+g*256L+b*65536L)

end  
</code>
    </div>
  </body>
</html>